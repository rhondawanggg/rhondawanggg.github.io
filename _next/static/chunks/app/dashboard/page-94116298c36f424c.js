(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{1943:function(e,t,s){Promise.resolve().then(s.bind(s,4135))},4135:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var l=s(3827),a=s(4090),i=s(7907),r=s(8222);function c(e){let{className:t=""}=e;return(0,l.jsx)("header",{className:"w-full py-4 px-8 bg-white shadow flex items-center justify-between ".concat(t),children:(0,l.jsx)("span",{className:"text-2xl font-extrabold bg-gradient-to-tr from-purple-500 to-pink-400 bg-clip-text text-transparent tracking-wide",children:"PitchAI"})})}function n(e){let{className:t=""}=e;return(0,l.jsx)("footer",{className:"w-full py-4 text-center text-gray-400 text-sm ".concat(t),children:"\xa9 2024 PitchAI"})}function o(e){let{children:t,className:s=""}=e;return(0,l.jsxs)("div",{className:"min-h-screen flex flex-col ".concat(s),children:[(0,l.jsx)(c,{}),(0,l.jsx)("main",{className:"flex-1",children:t}),(0,l.jsx)(n,{}),(0,l.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"})]})}function d(){let e=(0,i.useRouter)(),[t,s]=(0,a.useState)([]),[c,n]=(0,a.useState)(null),[d,x]=(0,a.useState)(!0),[m,p]=(0,a.useState)("");(0,a.useEffect)(()=>{(async()=>{try{let[e,t]=await Promise.all([r.F$.list({size:1e3}),r.F$.getStatistics()]);s(e.data.items),n(t.data)}catch(s){var e,t;p((null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"获取数据失败")}finally{x(!1)}})()},[]);let h=e=>({pending_review:"待评审",processing:"处理中",completed:"已完成",failed:"未通过"})[e]||"未知",f=e=>{let t={pending_review:{bg:"bg-yellow-100",text:"text-yellow-700",icon:"fa-clock"},processing:{bg:"bg-purple-100",text:"text-purple-700",icon:"fa-spinner fa-spin"},completed:{bg:"bg-green-100",text:"text-green-700",icon:"fa-check-circle"},failed:{bg:"bg-red-100",text:"text-red-700",icon:"fa-times-circle"}},s=t[e]||t.processing,a=h(e);return(0,l.jsxs)("span",{className:"inline-block px-3 py-1 rounded-full ".concat(s.bg," ").concat(s.text," text-xs"),children:[(0,l.jsx)("i",{className:"fa-solid ".concat(s.icon," mr-1")}),a]})},u=c?[{icon:"fa-check-circle",color:"from-green-400 to-blue-400",label:"已完成 (≥80分)",value:c.completed||0,description:"优秀项目"},{icon:"fa-clock",color:"from-yellow-400 to-orange-400",label:"待评审 (60-79分)",value:c.pending_review||0,description:"符合基本条件"},{icon:"fa-times-circle",color:"from-red-400 to-pink-400",label:"未通过 (<60分)",value:c.failed||0,description:"需要完善"},{icon:"fa-hourglass-half",color:"from-purple-500 to-pink-400",label:"处理中",value:c.processing||0,description:"等待评估"}]:[],j={completed:t.filter(e=>"completed"===e.status),pending_review:t.filter(e=>"pending_review"===e.status),failed:t.filter(e=>"failed"===e.status),processing:t.filter(e=>"processing"===e.status)},g=()=>(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"text-gray-400 text-sm",children:[(0,l.jsx)("th",{className:"py-2 w-1/3 text-left",children:"项目名称"}),(0,l.jsx)("th",{className:"py-2 w-1/4 text-left",children:"企业名称"}),(0,l.jsx)("th",{className:"py-2 w-1/6 text-left",children:"评分"}),(0,l.jsx)("th",{className:"py-2 w-1/6 text-left",children:"操作"})]})}),b=t=>{let{project:s,showScore:a=!0}=t;return(0,l.jsxs)("tr",{className:"border-t hover:bg-gray-50",children:[(0,l.jsx)("td",{className:"py-3 font-medium text-gray-800 w-1/3",children:s.project_name}),(0,l.jsx)("td",{className:"py-3 text-gray-600 w-1/4",children:s.enterprise_name}),(0,l.jsx)("td",{className:"py-3 w-1/6",children:a?(0,l.jsxs)("span",{className:"inline-block px-3 py-1 rounded-full bg-green-100 text-green-700 text-xs font-semibold",children:[s.total_score,"/100"]}):f(s.status)}),(0,l.jsx)("td",{className:"py-3 w-1/6",children:(0,l.jsx)("button",{onClick:()=>e.push("/projects/".concat(s.id)),className:"text-purple-500 hover:underline text-sm",children:"查看详情"})})]})};return(0,l.jsxs)(o,{children:[(0,l.jsx)("main",{className:"flex-1 flex items-center justify-center",children:(0,l.jsxs)("div",{className:"w-full max-w-6xl mx-auto py-12",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-tr from-purple-500 to-pink-400 flex items-center justify-center mr-3 shadow",children:(0,l.jsx)("i",{className:"fa-solid fa-brain text-white text-2xl"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-gray-800 mb-1",children:"欢迎回来，评审专家！"}),(0,l.jsx)("div",{className:"text-gray-400",children:"快速查看您的评审任务和项目进展"})]})]}),(0,l.jsxs)("button",{onClick:()=>e.push("/projects/new"),className:"flex items-center px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-400 text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:-translate-y-0.5",children:[(0,l.jsx)("i",{className:"fa-solid fa-plus mr-2"}),"新建项目"]})]}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-10",children:u.map(e=>(0,l.jsxs)("div",{className:"bg-white rounded-2xl shadow flex flex-col items-center p-6 transition hover:shadow-xl",children:[(0,l.jsx)("div",{className:"w-12 h-12 flex items-center justify-center rounded-xl bg-gradient-to-tr ".concat(e.color," text-white text-2xl mb-3"),children:(0,l.jsx)("i",{className:"fa-solid ".concat(e.icon)})}),(0,l.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:e.value}),(0,l.jsx)("div",{className:"text-gray-700 font-medium text-center",children:e.label}),(0,l.jsx)("div",{className:"text-gray-400 text-xs text-center mt-1",children:e.description})]},e.label))}),(0,l.jsxs)("div",{className:"space-y-8",children:[j.completed.length>0&&(0,l.jsxs)("div",{className:"bg-white rounded-2xl shadow p-8",children:[(0,l.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,l.jsxs)("div",{className:"text-lg font-semibold text-gray-700 flex items-center",children:[(0,l.jsx)("i",{className:"fa-solid fa-check-circle text-green-500 mr-2"}),"已完成项目 (≥80分)",(0,l.jsx)("span",{className:"ml-2 bg-green-100 text-green-700 px-2 py-1 rounded-full text-xs",children:j.completed.length})]})}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"w-full text-left table-fixed",children:[(0,l.jsx)(g,{}),(0,l.jsx)("tbody",{children:j.completed.map(e=>(0,l.jsx)(b,{project:e,showScore:!0},e.id))})]})})]}),j.pending_review.length>0&&(0,l.jsxs)("div",{className:"bg-white rounded-2xl shadow p-8",children:[(0,l.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,l.jsxs)("div",{className:"text-lg font-semibold text-gray-700 flex items-center",children:[(0,l.jsx)("i",{className:"fa-solid fa-clock text-yellow-500 mr-2"}),"待评审项目 (60-79分)",(0,l.jsx)("span",{className:"ml-2 bg-yellow-100 text-yellow-700 px-2 py-1 rounded-full text-xs",children:j.pending_review.length})]})}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"w-full text-left table-fixed",children:[(0,l.jsx)(g,{}),(0,l.jsx)("tbody",{children:j.pending_review.map(e=>(0,l.jsx)(b,{project:e,showScore:!0},e.id))})]})})]}),j.failed.length>0&&(0,l.jsxs)("div",{className:"bg-white rounded-2xl shadow p-8",children:[(0,l.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,l.jsxs)("div",{className:"text-lg font-semibold text-gray-700 flex items-center",children:[(0,l.jsx)("i",{className:"fa-solid fa-times-circle text-red-500 mr-2"}),"未通过项目 (<60分)",(0,l.jsx)("span",{className:"ml-2 bg-red-100 text-red-700 px-2 py-1 rounded-full text-xs",children:j.failed.length})]})}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"w-full text-left table-fixed",children:[(0,l.jsx)(g,{}),(0,l.jsx)("tbody",{children:j.failed.map(e=>(0,l.jsx)(b,{project:e,showScore:!0},e.id))})]})})]}),j.processing.length>0&&(0,l.jsxs)("div",{className:"bg-white rounded-2xl shadow p-8",children:[(0,l.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,l.jsxs)("div",{className:"text-lg font-semibold text-gray-700 flex items-center",children:[(0,l.jsx)("i",{className:"fa-solid fa-spinner fa-spin text-purple-500 mr-2"}),"处理中项目",(0,l.jsx)("span",{className:"ml-2 bg-purple-100 text-purple-700 px-2 py-1 rounded-full text-xs",children:j.processing.length})]})}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"w-full text-left table-fixed",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"text-gray-400 text-sm",children:[(0,l.jsx)("th",{className:"py-2 w-1/3 text-left",children:"项目名称"}),(0,l.jsx)("th",{className:"py-2 w-1/4 text-left",children:"企业名称"}),(0,l.jsx)("th",{className:"py-2 w-1/6 text-left",children:"状态"}),(0,l.jsx)("th",{className:"py-2 w-1/6 text-left",children:"操作"})]})}),(0,l.jsx)("tbody",{children:j.processing.map(e=>(0,l.jsx)(b,{project:e,showScore:!1},e.id))})]})})]}),0===t.length&&!d&&(0,l.jsxs)("div",{className:"bg-white rounded-2xl shadow p-8 text-center",children:[(0,l.jsxs)("div",{className:"text-gray-400 text-lg mb-4",children:[(0,l.jsx)("i",{className:"fa-solid fa-folder-open text-4xl mb-4"}),(0,l.jsx)("div",{children:"暂无项目数据"})]}),(0,l.jsxs)("button",{onClick:()=>e.push("/projects/new"),className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-400 text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-200",children:[(0,l.jsx)("i",{className:"fa-solid fa-plus mr-2"}),"创建第一个项目"]})]})]}),m&&(0,l.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-4",children:m}),d&&(0,l.jsxs)("div",{className:"text-center py-8",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),(0,l.jsx)("p",{className:"mt-4 text-gray-600",children:"加载中..."})]})]})}),(0,l.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"})]})}},8222:function(e,t,s){"use strict";s.d(t,{F$:function(){return c},iJ:function(){return n}});var l=s(3107),a=s(9079);let i=l.Z.create({baseURL:a.env.NEXT_PUBLIC_API_URL||"http://localhost:8000/api/v1",timeout:15e4,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),i.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)});let r=e=>e.data&&"object"==typeof e.data&&"code"in e.data?e.data:{code:e.status,message:"success",data:e.data},c={getStatistics:async()=>r(await i.get("/projects/statistics")),list:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(await i.get("/projects",{params:e}))},create:async e=>r(await i.post("/projects",e)),getDetail:async e=>r(await i.get("/projects/".concat(e))),update:async(e,t)=>r(await i.put("/projects/".concat(e),t)),delete:async e=>r(await i.delete("/projects/".concat(e))),updateTeamMembers:async(e,t)=>r(await i.put("/projects/".concat(e,"/team-members"),{team_members:t},{headers:{"Content-Type":"application/json"}}))},n={login:async(e,t)=>r(await i.post("/auth/login",{username:e,password:t})),logout:async()=>{localStorage.removeItem("token")}}}},function(e){e.O(0,[615,971,69,744],function(){return e(e.s=1943)}),_N_E=e.O()}]);