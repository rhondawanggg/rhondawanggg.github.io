(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[811],{3587:function(e,t,s){Promise.resolve().then(s.bind(s,6228))},6228:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var a=s(3827),n=s(4090),l=s(7907),r=s(8222);function c(){let e=(0,l.useRouter)(),[t,s]=(0,n.useState)([]),[c,i]=(0,n.useState)(!0),[o,d]=(0,n.useState)(""),[p,x]=(0,n.useState)(""),[u,m]=(0,n.useState)("");(0,n.useEffect)(()=>{(async()=>{try{let e=await r.F$.list({search:p||void 0,status:u||void 0});s(e.data.items)}catch(s){var e,t;d((null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"获取项目列表失败")}finally{i(!1)}})()},[p,u]);let h=e=>({pending_review:"待评审",processing:"处理中",completed:"已完成",failed:"未通过"})[e]||"未知",f=e=>{let t={pending_review:{bg:"bg-yellow-100",text:"text-yellow-700",icon:"fa-clock"},processing:{bg:"bg-purple-100",text:"text-purple-700",icon:"fa-spinner fa-spin"},completed:{bg:"bg-green-100",text:"text-green-700",icon:"fa-check-circle"},failed:{bg:"bg-red-100",text:"text-red-700",icon:"fa-times-circle"}},s=t[e]||t.processing,n=h(e);return(0,a.jsxs)("span",{className:"inline-block px-3 py-1 rounded-full ".concat(s.bg," ").concat(s.text," text-xs"),children:[(0,a.jsx)("i",{className:"fa-solid ".concat(s.icon," mr-1")}),n]})};return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col",style:{fontFamily:"Inter, sans-serif",background:"linear-gradient(135deg, #f8fafc 0%, #f3e8ff 100%)"},children:[(0,a.jsx)("header",{className:"w-full py-4 px-8 bg-white shadow flex items-center justify-between",children:(0,a.jsx)("span",{className:"text-2xl font-extrabold bg-gradient-to-tr from-purple-500 to-pink-400 bg-clip-text text-transparent tracking-wide",children:"PitchAI"})}),(0,a.jsx)("main",{className:"flex-1 flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-full max-w-6xl mx-auto py-12",children:(0,a.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl p-10 mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-gray-800 flex items-center",children:[(0,a.jsx)("i",{className:"fa-solid fa-clock-rotate-left text-purple-500 mr-2"})," 历史评审记录"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"text",placeholder:"搜索项目/企业",className:"px-4 py-2 rounded-xl border border-gray-200 bg-gray-50 focus:ring-2 focus:ring-purple-400 focus:outline-none text-sm",value:p,onChange:e=>x(e.target.value)}),(0,a.jsxs)("select",{className:"px-3 py-2 rounded-xl border border-gray-200 bg-gray-50 text-sm focus:ring-2 focus:ring-purple-400 focus:outline-none",value:u,onChange:e=>m(e.target.value),children:[(0,a.jsx)("option",{value:"",children:"全部状态"}),(0,a.jsx)("option",{value:"processing",children:"处理中"}),(0,a.jsx)("option",{value:"pending_review",children:"待评审 (60-79分)"}),(0,a.jsx)("option",{value:"completed",children:"已完成 (≥80分)"}),(0,a.jsx)("option",{value:"failed",children:"未通过 (<60分)"})]})]})]}),(0,a.jsxs)("table",{className:"w-full text-left",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"text-gray-400 text-sm",children:[(0,a.jsx)("th",{className:"py-2",children:"项目名称"}),(0,a.jsx)("th",{className:"py-2",children:"企业名称"}),(0,a.jsx)("th",{className:"py-2",children:"评审时间"}),(0,a.jsx)("th",{className:"py-2",children:"总分"}),(0,a.jsx)("th",{className:"py-2",children:"状态"}),(0,a.jsx)("th",{className:"py-2",children:"操作"})]})}),(0,a.jsx)("tbody",{children:c?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,className:"py-6 text-center text-gray-400",children:"加载中..."})}):0===t.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,className:"py-6 text-center text-gray-400",children:"暂无项目数据"})}):t.map(t=>{var s,n;return(0,a.jsxs)("tr",{className:"border-t hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"py-3 font-medium text-gray-800",children:t.project_name}),(0,a.jsx)("td",{className:"py-3 text-gray-600",children:t.enterprise_name}),(0,a.jsx)("td",{className:"py-3 text-gray-500",children:null===(s=t.created_at)||void 0===s?void 0:s.slice(0,10)}),(0,a.jsx)("td",{className:"py-3",children:(0,a.jsx)("span",{className:"inline-block px-3 py-1 rounded-full bg-gradient-to-tr from-purple-500 to-pink-400 text-white text-xs",children:null!==(n=t.total_score)&&void 0!==n?n:"--"})}),(0,a.jsx)("td",{className:"py-3",children:f(t.status)}),(0,a.jsx)("td",{className:"py-3",children:(0,a.jsx)("button",{onClick:()=>e.push("/projects/".concat(t.id,"/report")),className:"text-purple-500 hover:underline text-sm",children:"查看报告"})})]},t.id)})})]})]})})}),(0,a.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"})]})}},8222:function(e,t,s){"use strict";s.d(t,{F$:function(){return c},iJ:function(){return i}});var a=s(3107),n=s(9079);let l=a.Z.create({baseURL:n.env.NEXT_PUBLIC_API_URL||"http://localhost:8000/api/v1",timeout:15e4,headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),l.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)});let r=e=>e.data&&"object"==typeof e.data&&"code"in e.data?e.data:{code:e.status,message:"success",data:e.data},c={getStatistics:async()=>r(await l.get("/projects/statistics")),list:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(await l.get("/projects",{params:e}))},create:async e=>r(await l.post("/projects",e)),getDetail:async e=>r(await l.get("/projects/".concat(e))),update:async(e,t)=>r(await l.put("/projects/".concat(e),t)),delete:async e=>r(await l.delete("/projects/".concat(e))),updateTeamMembers:async(e,t)=>r(await l.put("/projects/".concat(e,"/team-members"),{team_members:t},{headers:{"Content-Type":"application/json"}}))},i={login:async(e,t)=>r(await l.post("/auth/login",{username:e,password:t})),logout:async()=>{localStorage.removeItem("token")}}}},function(e){e.O(0,[615,971,69,744],function(){return e(e.s=3587)}),_N_E=e.O()}]);